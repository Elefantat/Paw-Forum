{% extends "base.html" %}

{% block content %}
<div class="profile-container">
    <h1>My Profile</h1>

    <!-- 显示用户头像 -->
    <div class="avatar-section">
        <img 
            src="{{ url_for('static', filename='image/avatars/' ~ (current_user.user_image if current_user.user_image else 'avatar1.png')) }}"
            alt="User Avatar"
            class="avatar-img"
        >
    </div>

    <!-- 表单 -->
    <form method="POST" action="{{ url_for('profile') }}">
        <div class="form-group">
            <label for="username">Username</label>
            <input 
                type="text"
                id="username"
                name="username"
                value="{{ current_user.username }}"
                required
            >
        </div>

        <div class="form-group">
            <label for="email">Email</label>
            <input 
                type="email"
                id="email"
                name="email"
                value="{{ current_user.email }}"
                required
            >
        </div>

        <div class="form-group">
            <label for="phone">Phone</label>
            <input 
                type="text"
                id="phone"
                name="phone"
                value="{{ current_user.phone or '' }}"
            >
        </div>

        <div class="form-group">
            <label for="gender">Gender</label>
            <select id="gender" name="gender">
                <option value="">-- Select --</option>
                <option value="Male" {% if current_user.gender == 'Male' %}selected{% endif %}>Male</option>
                <option value="Female" {% if current_user.gender == 'Female' %}selected{% endif %}>Female</option>
                <option value="Other" {% if current_user.gender == 'Other' %}selected{% endif %}>Other</option>
            </select>
        </div>

        <div class="form-group">
            <label for="postcode">Postcode</label>
            <input 
                type="text"
                id="postcode"
                name="postcode"
                value="{{ current_user.postcode or '' }}"
            >
        </div>

        <div class="form-group">
            <label for="petType">Pet Type</label>
            <input
                type="text"
                id="petType"
                name="petType"
                value="{{ current_user.pet_type or '' }}"
                placeholder="E.g. Cat, Dog"
            >
        </div>

        <!-- 隐藏字段：头像文件名 -->
        <input 
            type="hidden" 
            name="user_image" 
            id="user_image" 
            value="{{ current_user.user_image if current_user.user_image else 'avatar1.png' }}"
        >

        <div class="form-actions">
            <button type="submit" class="btn-save">Save Changes</button>
        </div>
    </form>
</div>
{% endblock %}
